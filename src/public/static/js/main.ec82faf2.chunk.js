(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,a){e.exports=a(28)},28:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(8),s=a.n(c),i=a(5),l=a(1),o=a.n(l),u=a(4),d=a(7),m=a(10),p=a(2),b=a(14),f=a(15),h=new(function(){function e(t){Object(b.a)(this,e),this.ApiKey=void 0,this.CHAPA_LINK="https://chapa-test.herokuapp.com/api/cards",this.CHAPA_LOCaL_LINK="http://localhost:5001/api/cards",this.ApiKey=t}return Object(f.a)(e,[{key:"createCreditCard",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.CHAPA_LINK,{method:"POST",body:JSON.stringify(t),headers:{api_key:this.ApiKey,"content-type":"application/json;charset=UTF-8"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",Object(p.a)(Object(p.a)({},r),{},{data:r.data}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCreditCard",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.CHAPA_LINK,"/").concat(t),{method:"GET",headers:{api_key:this.ApiKey,"content-type":"application/json;charset=UTF-8"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",Object(p.a)(Object(p.a)({},r),{},{data:r.data}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCreditCard",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this.CHAPA_LINK,"/").concat(t),{method:"DELETE",headers:{api_key:this.ApiKey,"content-type":"application/json;charset=UTF-8"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllCreditCards",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.CHAPA_LINK,{method:"GET",headers:{api_key:this.ApiKey,"content-type":"application/json;charset=UTF-8"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",Object(p.a)(Object(p.a)({},a),{},{data:a.data}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())("4ada6ec0f287771ae1e4833660609642e786ae332de2da40ffce6e8c554b4b2f"),v=a(16),y=a(17),E=Object(y.a)({name:"message_store",initialState:{cards:[],count:0},reducers:{setCards:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{cards:t.payload,count:t.payload.length})},addCard:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{cards:[t.payload].concat(Object(v.a)(e.cards)),count:e.cards.length+1})},deleteCard:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{cards:e.cards.filter((function(e){return e.id!==t.payload})),count:e.cards.length-1})}}}),j=E.actions,N=j.setCards,C=j.addCard,O=j.deleteCard,x=function(e){return e.cards.cards},k=E.reducer;var w=function(){var e=Object(r.useState)({card_number:"0",csv:"0",expiry:"0"}),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),l=Object(d.a)(s,2),b=l[0],f=l[1],v=Object(i.b)(),y=function(e){var t=e.target,r=t.name,n=t.value;c(Object(p.a)(Object(p.a)({},a),{},Object(m.a)({},r,n))),setTimeout((function(){"0"!==a.csv&&"0"!==a.expiry&&"0"!==a.card_number&&b&&f(!1)}),200)},E=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"0"===a.csv||"0"===a.expiry||"0"===a.card_number){e.next=8;break}return e.next=4,h.createCreditCard(a);case 4:(r=e.sent).success&&v(C(r.data)),e.next=9;break;case 8:f(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"col-6"},b&&n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Invalid Input Try Again."),n.a.createElement("form",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{htmlFor:"csvInput",className:"form-label"},"Card CSV"),n.a.createElement("input",{onChange:y,type:"text",name:"csv",className:"form-control",id:"csvInput","aria-describedby":"credit card csv"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{htmlFor:"expiryInput",className:"form-label"},"Card Expiry"),n.a.createElement("input",{onChange:y,type:"text",name:"expiry",className:"form-control",id:"expiryInput","aria-describedby":"expiryInput"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{htmlFor:"cardNumberInput",className:"form-label"},"Card Number"),n.a.createElement("input",{onChange:y,type:"text",name:"card_number",className:"form-control",id:"cardNumberInput","aria-describedby":"emailHelp"})),n.a.createElement("button",{onClick:E,className:"btn btn-primary"},"Submit")))},A=a(3),g=Object(A.b)({cards:k}),_=Object(A.d)(g,{}),I=function(){return Object(i.b)()},K=i.c,L=function(e){var t=e.card;return n.a.createElement("div",{className:"card rounded-3 my-2 bg-dark text-white"},n.a.createElement("div",{className:"card-body"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-10 col-lg-11 col-sm-11 col-md-10"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-sm-4"},"CSV:"),n.a.createElement("div",{className:"col col-sm-8"},t.csv)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-sm-4"},"Expiry:"),n.a.createElement("div",{className:"col col-sm-8"},t.expiry)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-sm-4"},"Card Number:"),n.a.createElement("div",{className:"col col-sm-8"},t.card_number))),n.a.createElement("div",{className:"col col-1 col-lg-1 col-sm-1 col-md-1"},n.a.createElement(S,{id:t.id})))))},S=function(e){var t=e.id,a=I(),r=function(){var e=Object(u.a)(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.deleteCreditCard(t);case 2:r=e.sent,console.log(r),!0===r.success&&a(O(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement("button",{className:" btn btn-outline-danger btn-sm",onClick:r},"X")},T=function(){var e=I(),t=K(x),a=Object(r.useState)(!0),c=Object(d.a)(a,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){(function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getAllCreditCards();case 2:a=t.sent,e(N(a.data)),i(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),s?n.a.createElement("h2",{className:"text-center"},"Loading All Credit Cards"):n.a.createElement("div",{className:"container  my-5"},n.a.createElement(w,null),n.a.createElement("div",{className:"row"},t.map((function(e,t){return n.a.createElement("div",{className:"col-md-6",key:t},n.a.createElement(L,{card:e}))}))))},F=function(){return n.a.createElement(T,null)};s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i.a,{store:_},n.a.createElement(F,null))),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.ec82faf2.chunk.js.map